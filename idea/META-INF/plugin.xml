<idea-plugin version="2">
	<id>org.napile.idea.lang</id>

	<name>napile : Language Support</name>
	<description>Napile language support</description>
	<version>@snapshot@</version>
	<vendor url="http://napile.org">napile.org</vendor>

	<project-components>
		<!--<component>
			<implementation-class>org.napile.idea.plugin.highlighter.DeclarationHintSupport</implementation-class>
		</component>        -->
	</project-components>

	<actions>
		<action id="Napile.NewClass" class="org.napile.idea.plugin.actions.NewKotlinFileAction">
			<add-to-group group-id="NewGroup1" anchor="after" relative-to-action="NewClass"/>
		</action>

		<action id="ShowJetExpressionType" class="org.napile.idea.plugin.actions.ShowExpressionTypeAction" text="Show Expression Type">
			<keyboard-shortcut keymap="$default" first-keystroke="control shift Q"/>
			<add-to-group group-id="RefactoringMenu" anchor="last"/>
		</action>
		<action id="CopyAsDiagnosticTest" class="org.napile.idea.plugin.actions.CopyAsDiagnosticTestAction" text="Copy Current File As Diagnostic Test">
			<keyboard-shortcut keymap="$default" first-keystroke="control alt shift T"/>
			<add-to-group group-id="RefactoringMenu" anchor="last"/>
		</action>

		<action id="ToggleJetErrorReporting" class="org.napile.idea.plugin.actions.ToggleErrorReportingAction" text="Error Reporting Enabled">
			<keyboard-shortcut keymap="$default" first-keystroke="control alt shift E"/>
			<add-to-group group-id="RefactoringMenu" anchor="last"/>
		</action>


	</actions>

	<extensions defaultExtensionNs="com.intellij">
		<applicationService serviceInterface="org.napile.compiler.lang.psi.stubs.elements.StubIndexService" serviceImplementation="org.napile.idea.plugin.stubindex.StubIndexServiceImpl"/>

		<projectService serviceInterface="org.napile.compiler.lang.resolve.NapileFilesProvider" serviceImplementation="org.napile.idea.plugin.project.PluginJetFilesProvider"/>

		<projectService serviceInterface="org.napile.idea.plugin.caches.JetShortNamesCache" serviceImplementation="org.napile.idea.plugin.caches.JetShortNamesCache" />

		<internalFileTemplate name="Napile Class"/>
		<internalFileTemplate name="Napile Enum"/>
		<internalFileTemplate name="Napile Retell"/>

		<gotoSymbolContributor implementation="org.napile.idea.plugin.caches.JetGotoSymbolContributor"/>
		<gotoClassContributor implementation="org.napile.idea.plugin.caches.JetGotoClassContributor"/>
		<lang.importOptimizer language="NAPILE" implementationClass="org.napile.idea.plugin.editor.importOptimizer.JetImportOptimizer"/>

		<fileTypeFactory implementation="org.napile.idea.plugin.JetFileFactory"/>

		<lang.syntaxHighlighterFactory key="NAPILE" implementationClass="org.napile.idea.plugin.highlighter.JetSyntaxHighlighterFactory"/>
		<lang.braceMatcher language="NAPILE" implementationClass="org.napile.idea.plugin.JetPairMatcher"/>
		<lang.parserDefinition language="NAPILE" implementationClass="org.napile.compiler.lang.parsing.NapileParserDefinition"/>
		<lang.commenter language="NAPILE" implementationClass="org.napile.idea.plugin.JetCommenter"/>
		<lang.psiStructureViewFactory language="NAPILE" implementationClass="org.napile.idea.plugin.structureView.JetStructureViewFactory"/>
		<lang.foldingBuilder language="NAPILE" implementationClass="org.napile.idea.plugin.JetFoldingBuilder"/>
		<lang.formatter language="NAPILE" implementationClass="org.napile.idea.plugin.formatter.JetFormattingModelBuilder"/>
		<lang.findUsagesProvider language="NAPILE" implementationClass="org.napile.idea.plugin.findUsages.JetFindUsagesProvider"/>
		<lang.refactoringSupport language="NAPILE" implementationClass="org.napile.idea.plugin.refactoring.JetRefactoringSupportProvider"/>
		<quoteHandler fileType="NAPILE" className="org.napile.idea.plugin.editor.KotlinQuoteHandler"/>
		<refactoring.moveHandler implementation="org.napile.idea.plugin.refactoring.move.JetMoveFilesOrDirectoriesHandler"/>
		<refactoring.copyHandler implementation="org.napile.idea.plugin.refactoring.copy.JetCopyClassHandler"/>
		<treeStructureProvider implementation="org.napile.idea.plugin.projectView.JetProjectViewProvider"/>

		<colorSettingsPage implementation="org.napile.idea.plugin.highlighter.JetColorSettingsPage"/>

		<codeStyleSettingsProvider implementation="org.napile.idea.plugin.formatter.JetCodeStyleSettingsProvider"/>
		<langCodeStyleSettingsProvider implementation="org.napile.idea.plugin.formatter.JetLanguageCodeStyleSettingsProvider"/>

		<templateParameterTraversalPolicy implementation="org.napile.idea.plugin.completion.JetTemplateParameterTraversalPolicy"/>

		<codeInsight.parameterInfo language="NAPILE" implementationClass="org.napile.idea.plugin.parameterInfo.JetFunctionParameterInfoHandler"/>

		<codeInsight.gotoSuper language="NAPILE" implementationClass="org.napile.idea.plugin.codeInsight.GotoSuperActionHandler"/>
		<typeDeclarationProvider implementation="org.napile.idea.plugin.codeInsight.JetTypeDeclarationProvider"/>

		<completion.contributor language="NAPILE" id="JetKeywordCompletionContributor" order="first" implementationClass="org.napile.idea.plugin.completion.JetKeywordCompletionContributor"/>

		<completion.contributor language="NAPILE" id="JetCompletionContributor" implementationClass="org.napile.idea.plugin.completion.JetCompletionContributor"/>

		<!--<completion.contributor language="NAPILE" implementationClass="org.napile.idea.plugin.liveTemplates.JetLiveTemplateCompletionContributor" id="liveTemplates" order="first"/>  -->

		<completion.confidence language="NAPILE" implementationClass="com.intellij.codeInsight.completion.UnfocusedNameIdentifier"/>
		<completion.confidence language="NAPILE" implementationClass="org.napile.idea.plugin.completion.confidence.UnfocusedPossibleFunctionParameter"/>
		<completion.confidence language="NAPILE" implementationClass="com.intellij.codeInsight.completion.AlwaysFocusLookup" order="last"/>

		<completion.skip implementation="org.napile.idea.plugin.liveTemplates.JetLiveTemplateCompletionContributor$Skipper" id="skipLiveTemplate"/>

		<psi.referenceContributor language="NAPILE" order="after JetCompletionContributor" implementation="org.napile.idea.plugin.references.JetReferenceContributor"/>

		<renamePsiElementProcessor implementation="org.napile.idea.plugin.refactoring.rename.RenameJetClassProcessor"/>
		<renamePsiElementProcessor implementation="org.napile.idea.plugin.refactoring.rename.RenameKotlinFunctionProcessor"/>

		<!--<liveTemplateContext implementation="org.napile.idea.plugin.liveTemplates.JetTemplateContextType$Generic"/>
		<liveTemplateContext implementation="org.napile.idea.plugin.liveTemplates.JetTemplateContextType$Namespace"/>
		<liveTemplateContext implementation="org.napile.idea.plugin.liveTemplates.JetTemplateContextType$Statement"/>
		<liveTemplateContext implementation="org.napile.idea.plugin.liveTemplates.JetTemplateContextType$Class"/>
		<liveTemplateContext implementation="org.napile.idea.plugin.liveTemplates.JetTemplateContextType$Expression"/>
		<defaultLiveTemplatesProvider implementation="org.napile.idea.plugin.liveTemplates.JetLiveTemplatesProvider"/>
		<liveTemplateMacro implementation="org.napile.idea.plugin.liveTemplates.macro.JetAnyVariableMacro"/>
		<liveTemplateMacro implementation="org.napile.idea.plugin.liveTemplates.macro.JetFunctionParametersMacro"/>
		<liveTemplateMacro implementation="org.napile.idea.plugin.liveTemplates.macro.JetAnonymousSuperMacro"/>

		<liveTemplateMacro implementation="org.napile.idea.plugin.liveTemplates.macro.JetSuggestVariableNameMacro"/> -->

		<annotator language="NAPILE" implementationClass="org.napile.idea.plugin.highlighter.JetPsiChecker"/>
		<annotator language="NAPILE" implementationClass="org.napile.idea.plugin.highlighter.DebugInfoAnnotator"/>

		<extendWordSelectionHandler implementation="org.napile.idea.plugin.editor.wordSelection.JetStatementGroupSelectioner"/>
		<extendWordSelectionHandler implementation="org.napile.idea.plugin.editor.wordSelection.JetCodeBlockSelectioner"/>
		<extendWordSelectionHandler implementation="org.napile.idea.plugin.editor.wordSelection.JetListSelectioner"/>
		<typedHandler implementation="org.napile.idea.plugin.editor.KotlinTypedHandler"/>

		<documentationProvider implementation="org.napile.idea.plugin.JetQuickDocumentationProvider"/>

		<codeInsight.lineMarkerProvider language="NAPILE" implementationClass="org.napile.idea.plugin.highlighter.linemarker.NewLineMarkerProvider"/>
		<iconProvider implementation="org.napile.idea.plugin.JetIconProvider"/>
		<itemPresentationProvider implementationClass="org.napile.idea.plugin.presentation.JetFunctionPresenter" forClass="org.napile.compiler.lang.psi.impl.NapileNamedMethodImpl"/>
		<itemPresentationProvider implementationClass="org.napile.idea.plugin.presentation.JetClassPresenter" forClass="org.napile.compiler.lang.psi.impl.NapileClassImpl"/>
		<elementDescriptionProvider implementation="org.napile.idea.plugin.findUsages.JetElementDescriptionProvider"/>
		<findUsagesHandlerFactory implementation="org.napile.idea.plugin.findUsages.KotlinFindUsagesHandlerFactory"/>

		<codeInsight.implementMethod language="NAPILE" implementationClass="org.napile.idea.plugin.codeInsight.ImplementMethodsHandler"/>
		<codeInsight.overrideMethod language="NAPILE" implementationClass="org.napile.idea.plugin.codeInsight.OverrideMethodsHandler"/>

		<problemFileHighlightFilter implementation="org.napile.idea.plugin.codeInsight.problems.DefaultProblemFileHighlightFilter" />

		<stubElementTypeHolder class="org.napile.compiler.lang.psi.stubs.elements.NapileStubElementTypes"/>
		<stubIndex implementation="org.napile.idea.plugin.stubindex.JetShortClassNameIndex"/>
		<stubIndex implementation="org.napile.idea.plugin.stubindex.JetFullClassNameIndex"/>
		<stubIndex implementation="org.napile.idea.plugin.stubindex.NapileAllShortMethodNameIndex"/>
		<stubIndex implementation="org.napile.idea.plugin.stubindex.NapileAllShortVariableNameIndex"/>

		<referencesSearch implementation="org.napile.idea.plugin.search.KotlinReferencesSearcher"/>

		<compiler implementation="org.napile.idea.plugin.compiler.JetCompiler" />
		<toolWindow id="Napile" factoryClass="org.napile.idea.plugin.internal.KotlinInternalToolWindowFactory" anchor="right" icon="/org/jetbrains/jet/plugin/icons/kotlin_13.png"/>

		<applicationService serviceInterface="org.napile.idea.plugin.editor.JetEditorOptions" serviceImplementation="org.napile.idea.plugin.editor.JetEditorOptions"/>
		<exportable serviceInterface="org.napile.idea.plugin.editor.JetEditorOptions"/>
		<editorAppearanceConfigurable instance="org.napile.idea.plugin.editor.JetSettingEditorConfigurable"/>

		<configurationType implementation="org.napile.idea.plugin.run.NapileConfigurationType"/>

		<!--NXML support-->
		<filetype.decompiler filetype="NXML" implementationClass="org.napile.idea.plugin.psi.file.NXmlFileDecompiler" />
		<fileType.fileViewProviderFactory filetype="NXML" implementationClass="org.napile.compiler.lang.psi.impl.file.NXmlFileViewProviderFactory"/>
		<filetype.stubBuilder filetype="NXML" implementationClass="org.napile.idea.plugin.psi.file.NXmlFileStubBuilder"/>
		<syntaxHighlighter key="NXML" implementationClass="org.napile.idea.plugin.highlighter.JetHighlighter"/>

		<intentionAction>
			<className>org.napile.idea.plugin.intentions.SpecifyTypeExplicitlyAction</className>
			<category>Napile</category>
		</intentionAction>
	</extensions>
</idea-plugin>
