<idea-plugin version="2">
	<id>org.napile.idea.lang</id>

	<name>napile : Language Support</name>
	<description>Napile language support</description>
	<version>@snapshot@</version>
	<vendor url="http://napile.org">napile.org</vendor>
	<depends>com.intellij.copyright</depends>

	<project-components>
		<component>
			<implementation-class>org.napile.idea.plugin.editor.highlight.NapileHighlightPassFactory</implementation-class>
		</component>
		<component>
			<implementation-class>org.napile.idea.plugin.editor.highlight.NapileAnalyzeHighlightPassFactory</implementation-class>
		</component>
	</project-components>
	<application-components>
		<component>
			<implementation-class>org.napile.idea.plugin.IdeaInjectionSupportManager</implementation-class>
		</component>
	</application-components>

	<actions>
		<action id="Napile.NewClass" class="org.napile.idea.plugin.actions.NewNapileFileAction">
			<add-to-group group-id="NewGroup1" anchor="before" relative-to-action="NewClass"/>
		</action>

		<action id="ShowJetExpressionType" class="org.napile.idea.plugin.actions.ShowExpressionTypeAction" text="Show Expression Type">
			<keyboard-shortcut keymap="$default" first-keystroke="control shift Q"/>
			<add-to-group group-id="RefactoringMenu" anchor="last"/>
		</action>
		<action id="CopyAsDiagnosticTest" class="org.napile.idea.plugin.actions.CopyAsDiagnosticTestAction" text="Copy Current File As Diagnostic Test">
			<keyboard-shortcut keymap="$default" first-keystroke="control alt shift T"/>
			<add-to-group group-id="RefactoringMenu" anchor="last"/>
		</action>


		<action id="ConvertJavaToNapile" class="org.napile.idea.plugin.actions.ConvertJavaToNapileAction" text="Convert Java2Napile">
			<add-to-group group-id="RefactoringMenu" anchor="last"/>
		</action>
	</actions>

	<extensionPoints>
		<extensionPoint name="quickFix" beanClass="org.napile.idea.plugin.editor.highlight.NapileQuickFixProviderEP">
			<with attribute="implementationClass" implements="org.napile.idea.plugin.editor.highlight.NapileQuickFixProvider"/>
		</extensionPoint>
	</extensionPoints>

	<extensions defaultExtensionNs="com.intellij.copyright">
		<updater filetype="Napile" implementationClass="org.napile.idea.plugin.editor.copyright.UpdateNapileCopyrightsProvider"/>
	</extensions>

	<extensions defaultExtensionNs="org.napile.idea.lang">
		<quickFix diagnosticName="UNRESOLVED_REFERENCE" implementationClass="org.napile.idea.plugin.editor.highlight.quickFix.ImportClassQuickFixProvider"/>
	</extensions>

	<extensions defaultExtensionNs="com.intellij">
		<applicationService serviceInterface="org.napile.compiler.lang.psi.stubs.elements.StubIndexService" serviceImplementation="org.napile.idea.plugin.stubindex.StubIndexServiceImpl"/>

		<projectService serviceInterface="org.napile.idea.plugin.caches.NapileClassResolver" serviceImplementation="org.napile.idea.plugin.caches.NapileClassResolver"/>
		<moduleService serviceInterface="org.napile.idea.plugin.module.ModuleAnalyzer" serviceImplementation="org.napile.idea.plugin.module.impl.ModuleAnalyzerImpl"/>

		<internalFileTemplate name="Napile Class"/>

		<gotoSymbolContributor implementation="org.napile.idea.plugin.caches.JetGotoSymbolContributor"/>
		<gotoClassContributor implementation="org.napile.idea.plugin.caches.JetGotoClassContributor"/>
		<lang.importOptimizer language="NAPILE" implementationClass="org.napile.idea.plugin.editor.importOptimizer.JetImportOptimizer"/>

		<fileTypeFactory implementation="org.napile.idea.plugin.JetFileFactory"/>

		<lang.syntaxHighlighterFactory key="NAPILE" implementationClass="org.napile.idea.plugin.editor.highlight.NapileSyntaxHighlighterFactory"/>
		<lang.braceMatcher language="NAPILE" implementationClass="org.napile.idea.plugin.JetPairMatcher"/>

		<lang.parserDefinition language="NAPILE" implementationClass="org.napile.compiler.lang.parsing.NapileParserDefinition"/>
		<lang.parserDefinition language="NAPILE-DOC" implementationClass="org.napile.doc.lang.parsing.NapileDocParserDefinition"/>

		<lang.commenter language="NAPILE" implementationClass="org.napile.idea.plugin.JetCommenter"/>
		<lang.psiStructureViewFactory language="NAPILE" implementationClass="org.napile.idea.plugin.structureView.JetStructureViewFactory"/>
		<lang.foldingBuilder language="NAPILE" implementationClass="org.napile.idea.plugin.JetFoldingBuilder"/>
		<lang.formatter language="NAPILE" implementationClass="org.napile.idea.plugin.formatter.JetFormattingModelBuilder"/>
		<lang.findUsagesProvider language="NAPILE" implementationClass="org.napile.idea.plugin.findUsages.JetFindUsagesProvider"/>
		<lang.refactoringSupport language="NAPILE" implementationClass="org.napile.idea.plugin.refactoring.JetRefactoringSupportProvider"/>
		<qualifiedNameProvider implementation="org.napile.idea.plugin.actions.NapileQualifiedNameProvider"/>

		<refactoring.moveHandler implementation="org.napile.idea.plugin.refactoring.move.JetMoveFilesOrDirectoriesHandler"/>
		<refactoring.copyHandler implementation="org.napile.idea.plugin.refactoring.copy.JetCopyClassHandler"/>
		<treeStructureProvider implementation="org.napile.idea.plugin.projectView.NapileProjectViewProvider"/>

		<colorSettingsPage implementation="org.napile.idea.plugin.editor.highlight.NapileColorSettingsPage"/>

		<codeStyleSettingsProvider implementation="org.napile.idea.plugin.formatter.JetCodeStyleSettingsProvider"/>
		<langCodeStyleSettingsProvider implementation="org.napile.idea.plugin.formatter.JetLanguageCodeStyleSettingsProvider"/>

		<codeInsight.parameterInfo language="NAPILE" implementationClass="org.napile.idea.plugin.parameterInfo.JetFunctionParameterInfoHandler"/>

		<codeInsight.gotoSuper language="NAPILE" implementationClass="org.napile.idea.plugin.codeInsight.GotoSuperActionHandler"/>
		<typeDeclarationProvider implementation="org.napile.idea.plugin.codeInsight.JetTypeDeclarationProvider"/>

		<completion.confidence language="NAPILE" implementationClass="com.intellij.codeInsight.completion.UnfocusedNameIdentifier"/>
		<completion.confidence language="NAPILE" implementationClass="com.intellij.codeInsight.completion.AlwaysFocusLookup" order="last"/>

		<completion.contributor language="NAPILE" implementationClass="org.napile.idea.plugin.editor.completion.NapileCompletionContributor"/>

		<psi.referenceContributor language="NAPILE" order="after JetCompletionContributor" implementation="org.napile.idea.plugin.references.JetReferenceContributor"/>

		<renamePsiElementProcessor implementation="org.napile.idea.plugin.refactoring.rename.RenameJetClassProcessor"/>
		<renamePsiElementProcessor implementation="org.napile.idea.plugin.refactoring.rename.RenameKotlinFunctionProcessor"/>

		<moduleType id="NAPILE_MODULE" implementationClass="org.napile.idea.plugin.module.type.NapileModuleType"/>
		<moduleConfigurationEditorProvider implementation="org.napile.idea.plugin.module.type.DefaultModuleEditorsProvider"/>

		<extendWordSelectionHandler implementation="org.napile.idea.plugin.editor.wordSelection.NapileWordSelectioner" order="first"/>
		<extendWordSelectionHandler implementation="org.napile.idea.plugin.editor.wordSelection.JetStatementGroupSelectioner"/>
		<extendWordSelectionHandler implementation="org.napile.idea.plugin.editor.wordSelection.JetCodeBlockSelectioner"/>
		<extendWordSelectionHandler implementation="org.napile.idea.plugin.editor.wordSelection.JetListSelectioner"/>
		<typedHandler implementation="org.napile.idea.plugin.editor.NapileTypedHandler"/>

		<documentationProvider implementation="org.napile.idea.plugin.NapileQuickDocumentationProvider"/>

		<codeInsight.lineMarkerProvider language="NAPILE" implementationClass="org.napile.idea.plugin.editor.lineMarker.NewLineMarkerProvider"/>
		<codeInsight.lineMarkerProvider language="NAPILE" implementationClass="org.napile.idea.plugin.editor.lineMarker.RecursiveLineMarkerProvider"/>
		<codeInsight.lineMarkerProvider language="NAPILE" implementationClass="org.napile.idea.plugin.editor.lineMarker.MethodSeparatorLineMarkerProvider"/>
		<iconProvider implementation="org.napile.idea.plugin.NapileIconProvider"/>
		<colorProvider implementation="org.napile.idea.plugin.editor.lineMarker.NapileColorElementProvider"/>

		<itemPresentationProvider implementationClass="org.napile.idea.plugin.editor.presentation.NapileMethodOrMacroPresenter" forClass="org.napile.compiler.lang.psi.NapileNamedMethodOrMacro"/>
		<itemPresentationProvider implementationClass="org.napile.idea.plugin.editor.presentation.NapileClassPresenter" forClass="org.napile.compiler.lang.psi.NapileClass"/>
		<itemPresentationProvider implementationClass="org.napile.idea.plugin.editor.presentation.NapileVariablePresenter" forClass="org.napile.compiler.lang.psi.NapileVariable"/>

		<elementDescriptionProvider implementation="org.napile.idea.plugin.findUsages.JetElementDescriptionProvider"/>
		<findUsagesHandlerFactory implementation="org.napile.idea.plugin.findUsages.NapileFindUsagesHandlerFactory"/>

		<codeInsight.implementMethod language="NAPILE" implementationClass="org.napile.idea.plugin.codeInsight.ImplementMethodsHandler"/>
		<codeInsight.overrideMethod language="NAPILE" implementationClass="org.napile.idea.plugin.codeInsight.OverrideMethodsHandler"/>

		<problemFileHighlightFilter implementation="org.napile.idea.plugin.codeInsight.problems.NapileProblemFileHighlightFilter"/>
		<problemHighlightFilter implementation="org.napile.idea.plugin.codeInsight.problems.NapileProblemHighlightFilter"/>

		<stubElementTypeHolder class="org.napile.compiler.lang.psi.stubs.elements.NapileStubElementTypes"/>
		<stubIndex implementation="org.napile.idea.plugin.stubindex.NapileShortClassNameIndex"/>
		<stubIndex implementation="org.napile.idea.plugin.stubindex.NapileFullClassNameIndex"/>
		<stubIndex implementation="org.napile.idea.plugin.stubindex.NapileShortMethodNameIndex"/>
		<stubIndex implementation="org.napile.idea.plugin.stubindex.NapileShortMacroNameIndex"/>
		<stubIndex implementation="org.napile.idea.plugin.stubindex.NapileShortVariableNameIndex"/>

		<referencesSearch implementation="org.napile.idea.plugin.search.KotlinReferencesSearcher"/>

		<compiler implementation="org.napile.idea.plugin.compiler.NapileCompiler"/>
		<toolWindow id="Napile" factoryClass="org.napile.idea.plugin.codeInsight.toolWindow.NapileInternalToolWindowFactory" anchor="right" icon="/org/napile/icons/napile-logo13.png"/>

		<applicationService serviceInterface="org.napile.idea.plugin.editor.JetEditorOptions" serviceImplementation="org.napile.idea.plugin.editor.JetEditorOptions"/>
		<exportable serviceInterface="org.napile.idea.plugin.editor.JetEditorOptions"/>
		<editorAppearanceConfigurable instance="org.napile.idea.plugin.editor.JetSettingEditorConfigurable"/>

		<programRunner implementation="org.napile.idea.plugin.run.NapileProgramRunner"/>
		<configurationType implementation="org.napile.idea.plugin.run.NapileConfigurationType"/>
		<configurationProducer implementation="org.napile.idea.plugin.run.NapileConfigurationProducer"/>

		<!--Live templates-->
		<defaultLiveTemplatesProvider implementation="org.napile.idea.plugin.liveTemplates.NapileLiveTemplatesProvider"/>
		<liveTemplateContext implementation="org.napile.idea.plugin.liveTemplates.context.NapileGenericLiveTemplateContextType"/>
		<liveTemplateContext implementation="org.napile.idea.plugin.liveTemplates.context.NapileClassLiveTemplateContextType"/>

		<!--NXML support-->
		<filetype.decompiler filetype="NXML" implementationClass="org.napile.idea.plugin.psi.file.NXmlFileDecompiler"/>
		<fileType.fileViewProviderFactory filetype="NXML" implementationClass="org.napile.compiler.lang.psi.impl.file.NXmlFileViewProviderFactory"/>
		<filetype.stubBuilder filetype="NXML" implementationClass="org.napile.idea.plugin.psi.file.NXmlFileStubBuilder"/>
		<syntaxHighlighter key="NXML" implementationClass="org.napile.idea.plugin.editor.highlight.NapileHighlighter"/>
		<writingAccessProvider implementation="org.napile.idea.plugin.psi.file.NXmlWritingAccessProvider"/>
		<intentionAction>
			<className>org.napile.idea.plugin.intentions.SpecifyTypeExplicitlyAction</className>
			<category>Napile</category>
		</intentionAction>
	</extensions>
</idea-plugin>
